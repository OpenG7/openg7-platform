# Strapi workspace overview

This document summarizes the scope and operational expectations for the official Strapi workspace now that the legacy CMS has been decommissioned.

## Summary table

| Workspace | Location | Strapi generation | Purpose | Owner(s) |
|-----------|----------|-------------------|---------|----------|
| `strapi` | `/strapi` | v5 | Canonical CMS powering content, demo seeds, preview endpoints, API tokens, and runtime APIs consumed by Angular. | Data Platform squad |

## Day-to-day usage

- **Front-end developers** run `yarn dev:cms` from the monorepo root (or `cd strapi && yarn strapi develop`) to start the CMS locally.
- **Content editors** access the hosted Strapi admin (`:1337/admin`). Share the read-only API token generated by the seeds (`08-api-tokens.ts`) with the front-end when rotating credentials.
- **API consumers** regenerate `@openg7/contracts` via `yarn codegen` whenever content-types evolve, keeping the TypeScript types aligned with Strapi.

## Operational checklist

1. All new collections/components are implemented directly in `strapi`; the legacy workspace has been archived.
2. Keep the `.env.example` template up to date with any new environment variable so on-call engineers can bootstrap environments quickly (especially `STRAPI_API_READONLY_TOKEN` and `PREVIEW_TOKEN` used by the front).
3. Seeds must remain idempotent. Use `yarn workspace @openg7/strapi seed:dev` to replay them after schema or content-model changes.
4. Before promoting to staging/production, run `yarn predeploy:cms-cache` from the monorepo root with the target environment variables loaded; this validates cache warming, read-only token presence and feature-flag defaults expected by the front-end.
5. Always commit the updated `packages/contracts/spec/openapi.json` when Strapi content-types evolve so codegen stays in sync with the deployed API.

## Next steps

- Extend CI smoke tests that hit the key Strapi endpoints (`/api/companies`, `/api/exchanges`, `/api/feed/highlights`, `/api/corridors/realtime`, `/api/connections`).
- Keep documenting notable migrations (content-type breaking changes, plugin upgrades) inside `docs/strapi/` for future reference.
- Remove stale references to the legacy CMS in scripts or tooling whenever you encounter them.
