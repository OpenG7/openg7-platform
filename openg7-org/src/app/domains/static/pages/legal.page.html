<section
  data-og7="static-page"
  data-og7-page="legal"
  class="og7-page og7-page--static relative isolate overflow-hidden"
>
  <div aria-hidden="true" class="og7-static-backdrop">
    <div class="og7-static-backdrop__aurora"></div>
    <div class="og7-static-backdrop__stars"></div>
    <div class="og7-static-backdrop__veil"></div>
  </div>

  <div class="relative z-10 og7-static-shell og7-static-flow">
    <header class="space-y-8">
      <div class="og7-static-hero grid gap-6 p-8 lg:grid-cols-[minmax(0,1fr)_320px]">
        <div class="space-y-4">
          <p class="text-xs font-semibold uppercase tracking-[0.3em] text-tertiary">
            {{ 'pages.legal.kicker' | translate }}
          </p>
          <h1 class="og7-page__title text-title text-balance text-4xl font-semibold md:text-5xl">
            {{ 'pages.legal.title' | translate }}
          </h1>
          <p class="og7-page__intro text-lg text-subtle md:text-xl">
            {{ 'pages.legal.intro' | translate }}
          </p>
        </div>
        <div
          *ngIf="metaItems().length || legalPdfHref()"
          data-og7="legal-meta"
          class="og7-static-card og7-static-card--muted space-y-4 p-5"
        >
          <p class="text-xs font-semibold uppercase tracking-[0.28em] text-tertiary">
            {{ 'pages.legal.meta.title' | translate }}
          </p>
          <ul *ngIf="metaItems().length" class="space-y-3">
            <li *ngFor="let item of metaItems(); trackBy: trackByMetaItem" class="space-y-1">
              <p class="text-xs font-semibold uppercase tracking-[0.12em] text-subtle">
                {{ item.label }}
              </p>
              <p class="text-sm font-medium text-body">{{ item.value }}</p>
            </li>
          </ul>
          <a
            *ngIf="legalPdfHref()"
            [href]="legalPdfHref()"
            target="_blank"
            rel="noopener noreferrer"
            data-og7-id="download-pdf"
            class="og7-static-action-primary inline-flex items-center justify-center rounded-xl bg-primary px-4 py-2 text-sm font-semibold text-on-primary transition hover:opacity-90"
          >
            {{ 'pages.legal.meta.downloadLabel' | translate }}
          </a>
          <p *ngIf="legalPdfHref()" class="text-xs text-subtle">
            {{ 'pages.legal.meta.downloadHint' | translate }}
          </p>
        </div>
      </div>

      <dl *ngIf="highlights().length" class="grid gap-4 sm:grid-cols-2" data-og7-legal-highlights>
        <div
          *ngFor="let highlight of highlights(); trackBy: trackByHighlight"
          data-og7-legal-highlight
          class="og7-static-card og7-static-fade-in space-y-2 rounded-2xl p-5"
        >
          <dt class="text-xs font-semibold uppercase tracking-wide text-primary">
            {{ highlight.label }}
          </dt>
          <dd class="text-lg font-medium text-body">{{ highlight.value }}</dd>
          <p *ngIf="highlight.description" class="text-sm leading-relaxed text-subtle">
            {{ highlight.description }}
          </p>
        </div>
      </dl>
    </header>

    <div class="grid gap-10 lg:grid-cols-[minmax(0,2fr)_340px]">
      <article class="og7-page__content space-y-8">
        <section
          *ngFor="let section of sections; let index = index; trackBy: trackBySection"
          data-og7="legal-section"
          [attr.data-og7-id]="section.key"
          [attr.id]="sectionAnchor(section)"
          [ngClass]="isSectionActive(section) ? 'border-primary shadow-md' : ''"
          class="og7-static-section space-y-4 rounded-3xl p-8"
        >
          <header class="flex flex-col gap-4 sm:flex-row sm:items-start sm:gap-6">
            <span
              aria-hidden="true"
              class="flex h-12 w-12 shrink-0 items-center justify-center rounded-2xl bg-gradient-to-br text-lg font-semibold text-title shadow-lg"
              [ngClass]="section.accent"
            >
              {{ index + 1 }}
            </span>
            <div class="space-y-2 sm:flex-1">
              <div class="flex items-start justify-between gap-4">
                <h2 class="scroll-mt-28 text-2xl font-semibold text-title">
                  {{ 'pages.legal.sections.' + section.key + '.title' | translate }}
                </h2>
                <button
                  type="button"
                  class="inline-flex items-center gap-2 rounded-xl border border-[color:var(--og7-color-border)] px-3 py-2 text-xs font-semibold uppercase tracking-[0.12em] text-subtle transition hover:border-primary hover:text-title md:hidden"
                  [attr.aria-controls]="sectionAnchor(section) + '-content'"
                  [attr.aria-expanded]="isSectionExpanded(section)"
                  [attr.data-og7-id]="'toggle-' + section.key"
                  (click)="toggleSection(section)"
                >
                  {{ (isSectionExpanded(section) ? 'pages.legal.controls.collapse' :
                  'pages.legal.controls.expand' ) | translate }}
                </button>
              </div>
            </div>
          </header>
          <div
            [attr.id]="sectionAnchor(section) + '-content'"
            class="space-y-4"
            [class.hidden]="mobileView() && !isSectionExpanded(section)"
          >
            <p *ngFor="let paragraph of paragraphs(section.key)" class="leading-relaxed text-body">
              {{ paragraph }}
            </p>
            <ul *ngIf="bullets(section.key).length" class="list-disc space-y-2 pl-6 text-body">
              <li *ngFor="let item of bullets(section.key)">{{ item }}</li>
            </ul>
          </div>
        </section>
      </article>

      <aside class="space-y-6 lg:sticky lg:top-24 lg:self-start">
        <div data-og7="legal-toc" class="og7-static-card space-y-4 rounded-3xl p-6">
          <h2 class="text-base font-semibold text-title">
            {{ 'pages.legal.toc.title' | translate }}
          </h2>
          <p class="text-sm text-subtle">{{ 'pages.legal.toc.description' | translate }}</p>
          <nav>
            <ul class="space-y-2 text-sm">
              <li *ngFor="let section of sections; trackBy: trackBySection">
                <a
                  class="og7-static-nav-link flex items-center justify-between gap-3 rounded-2xl border px-3 py-2 text-left transition"
                  [ngClass]="
                  isSectionActive(section)
                    ? 'is-active border-primary bg-[color:var(--og7-color-primary-soft)] text-title'
                    : 'border-transparent text-body hover:border-primary hover:bg-[color:var(--og7-color-primary-soft)] hover:text-title'
                "
                  [href]="'#' + sectionAnchor(section)"
                  [attr.aria-current]="isSectionActive(section) ? 'true' : null"
                  [attr.data-og7-id]="section.key"
                  (click)="setActiveSection(section)"
                >
                  <span>{{ 'pages.legal.sections.' + section.key + '.title' | translate }}</span>
                  <span
                    aria-hidden="true"
                    class="text-xs"
                    [ngClass]="isSectionActive(section) ? 'text-primary' : 'text-subtle'"
                  >
                    ->
                  </span>
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <div
          *ngIf="contactCard() as contact"
          data-og7-legal-contact
          class="og7-static-card space-y-5 rounded-2xl p-6"
        >
          <div class="space-y-2">
            <h2 class="text-xl font-semibold text-title">{{ contact.title }}</h2>
            <p *ngIf="contact.description" class="text-sm leading-relaxed text-subtle">
              {{ contact.description }}
            </p>
          </div>
          <ul class="space-y-4">
            <li
              *ngFor="let channel of contact.channels; trackBy: trackByContactChannel"
              class="space-y-1"
              data-og7-legal-contact-channel
            >
              <span class="text-xs font-semibold uppercase tracking-wide text-primary"
                >{{ channel.label }}</span
              >
              <div class="flex items-start justify-between gap-3">
                <div class="text-base font-medium text-body">
                  <a *ngIf="channel.href" [href]="channel.href" class="hover:underline"
                    >{{ channel.value }}</a
                  >
                  <span *ngIf="!channel.href">{{ channel.value }}</span>
                </div>
                <button
                  *ngIf="canCopyChannel(channel)"
                  type="button"
                  class="rounded-lg border border-[color:var(--og7-color-border)] px-2 py-1 text-xs font-semibold text-subtle transition hover:border-primary hover:text-title"
                  [attr.data-og7-id]="'copy-' + channel.key"
                  (click)="copyChannelValue(channel)"
                >
                  {{ (isChannelCopied(channel) ? 'pages.legal.contact.copied' :
                  'pages.legal.contact.copy') | translate }}
                </button>
              </div>
              <p *ngIf="channel.hint" class="text-xs text-subtle">{{ channel.hint }}</p>
            </li>
          </ul>
        </div>
      </aside>
    </div>
  </div>
</section>
